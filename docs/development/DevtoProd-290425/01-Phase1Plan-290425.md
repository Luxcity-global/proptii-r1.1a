**Phase 1: Preparation & Setup Detailed Plan**

1. **Resource Group Creation & Organization**
   ```
   a. Create Resource Group (if not exists)
      - Name: "proptii-rg" (it actually exists)
      - Location: [Your preferred Azure region]
      - Tags:
        - Environment: Production
        - Project: Proptii
        - ManagedBy: [Your team name]
   
   b. Set up Azure DevOps project
      - Create new project: "Proptii"
      - Configure project settings:
        - Version control: Git
        - Work item process: Agile
        - Visibility: Private
   
   c. Configure deployment pipelines
      - Create pipeline templates for:
        - Frontend (React)
        - Backend (Node.js)
        - Database migrations
      - Set up environment approvals
      - Configure service connections
   ```

2. **Database Migration Planning**
   ```
   a. Schema Analysis & Mapping
      - Document current Firestore collections:
        - Properties
        - ViewingRequests
        - Users
        - Any other collections
      
      - Create Cosmos DB design:
        - Database and container structure
        - Partition key strategy
        - Indexing policies
        - Consistency levels
      
      - Document data mapping:
        - Firestore â†’ Cosmos DB documents
        - Special handling for:
          - Timestamps
          - Arrays
          - Nested objects
          - Geospatial data
          - Document references
   
   b. Create Migration Strategy
      - Data transfer approach:
        - Use Azure Data Factory
        - Implement incremental sync
        - Handle document relationships
      - Validation process:
        - Document count verification
        - Data integrity checks
        - Query performance testing
      - Rollback plan:
        - Keep Firestore active
        - Maintain data sync
        - Document versioning
   ```

3. **Environment Setup**
   ```
   a. Development Environment
      - Create .env.development:
        - Azure Functions URL
        - Cosmos DB connection string
        - Cosmos DB database name
        - Cosmos DB container names
        - Azure AD B2C configuration
        - CDN endpoint
        - Other service endpoints
      
      - Create local.settings.json:
        - Function app settings
        - Cosmos DB settings
        - Authentication settings
        - Logging configuration
   
   b. Staging Environment
      - Create .env.staging:
        - Staging Azure Functions URL
        - Staging Cosmos DB connection string
        - Staging Cosmos DB database name
        - Staging Cosmos DB container names
        - Staging Azure AD B2C configuration
        - Staging CDN endpoint
        - Other staging service endpoints
   
   c. Production Environment
      - Create .env.production:
        - Production Azure Functions URL
        - Production Cosmos DB connection string
        - Production Cosmos DB database name
        - Production Cosmos DB container names
        - Production Azure AD B2C configuration
        - Production CDN endpoint
        - Other production service endpoints
   ```

**Implementation Order & Dependencies:**

1. **Week 1: Resource Setup**
   - Day 1: Create Resource Group and Azure DevOps project
   - Day 2: Configure deployment pipelines
   - Day 3: Set up service connections and permissions

2. **Week 2: Database Planning**
   - Day 1: Document current Firestore schema
   - Day 2: Design Cosmos DB structure
   - Day 3: Create migration strategy
   - Day 4: Set up Cosmos DB resources

3. **Week 3: Environment Configuration**
   - Day 1: Set up development environment
   - Day 2: Configure staging environment
   - Day 3: Prepare production environment
   - Day 4: Validate all environment configurations

**Key Considerations:**

1. **Security**
   - Implement proper RBAC for Azure resources
   - Set up key vault for sensitive configurations
   - Configure network security groups
   - Set up private endpoints for Cosmos DB

2. **Monitoring**
   - Set up basic logging for all environments
   - Configure alerts for critical resources
   - Plan for application insights integration
   - Monitor Cosmos DB metrics (RU/s, latency, etc.)

3. **Cost Management**
   - Review and document resource sizing
   - Set up budget alerts
   - Plan for cost optimization
   - Consider Cosmos DB autoscale settings

Would you like me to:
1. Create specific Azure CLI commands for Cosmos DB resource creation?
2. Develop detailed Cosmos DB schema design?
3. Create environment configuration templates?
4. Focus on any particular aspect of Phase 1?
